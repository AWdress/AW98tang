# Web配置完整版 - 所有配置项在线设置

## 📋 更新概述

现在Web界面支持在线设置 `config.json` 的所有配置项，无需手动编辑配置文件！

## ✨ 新增配置区域

### 🔐 基础配置
- **论坛地址**：目标论坛的URL
- **用户名**：登录用户名
- **密码**：登录密码
- **安全问题**：8个选项，从"不设置"到各种安全问题
- **安全问题答案**：对应的答案

### 💬 回复功能配置
- **每日回复上限**：1-100之间的数字
- **回复间隔**：最小值和最大值（秒）
- **启用自动回复**：是/否
- **启用智能回复**：是（根据内容生成）/ 否（使用模板）
- **启用随机延迟**：是（更自然）/ 否

### ⏰ 签到与定时任务
- **启用每日签到**：是/否
- **启用定时任务**：是/否
- **定时运行时间**：HH:MM格式

### 🧪 测试模式
- **全局测试模式**：是（所有功能）/ 否
- **测试回复功能**：是（不发送回复）/ 否
- **测试签到功能**：是（不点击签到）/ 否

带有详细说明的提示框，解释每个测试模式的作用。

### 📍 目标论坛
- **论坛ID列表**：每行一个，格式 `fid=141`
- **论坛名称映射**：格式 `fid=141|网友原创区`，每行一个

支持多个论坛，Web界面会显示友好名称。

### 🚫 过滤规则
- **跳过的关键词**：每行一个
- **跳过的标题前缀**：每行一个
- **跳过的管理员用户名**：每行一个

包含这些规则的帖子将被自动跳过。

### 📝 回复模板
- **备用回复模板**：每行一个回复内容

仅在"启用智能回复"和"启用AI回复"都关闭时使用，系统会随机选择一条。

### ⚙️ 其他配置
- **日志级别**：DEBUG / INFO / WARNING / ERROR

### 🌐 网络代理配置
（已有功能，保持不变）
- 启用代理
- HTTP/HTTPS代理地址
- 不使用代理的地址
- Git/Selenium 使用代理选项

### 🤖 AI智能回复配置
（已有功能，保持不变）
- 启用AI回复
- AI接口类型
- API地址、Key、模型
- 生成参数（温度、最大长度、超时）
- 系统提示词

## 🎨 界面优化

### 分区卡片设计
每个配置区域都有独立的卡片，带有：
- **图标标识**：一目了然的图标（🔐💬⏰🧪📍🚫📝⚙️）
- **清晰标题**：描述配置区域
- **提示说明**：重要区域有蓝色/黄色提示框，解释配置的作用

### 多行文本输入
- **目标论坛**、**论坛名称映射**、**过滤规则**、**回复模板**都使用多行文本框
- 每行一个配置项，方便编辑
- 使用等宽字体，便于对齐

### 安全处理
- **密码字段**：使用 `type="password"` 隐藏显示
- 后端已有密码保护逻辑，显示为 `******` 时保留原密码

## 💡 使用说明

### 1. 访问配置页面
- 登录Web界面
- 点击侧边栏的 **"⚙️ 系统配置"**

### 2. 编辑配置
- 所有配置项都有默认值
- 修改任何配置项
- 对于多行文本框：
  - 每行一个配置项
  - 空行会被自动忽略
  - 论坛名称映射格式：`fid=141|网友原创区`

### 3. 保存配置
- 点击底部的 **"💾 保存配置"** 按钮
- 系统会显示保存成功的提示
- 配置立即生效（运行中的任务需重启）

### 4. 重置配置
- 点击 **"🔄 重置"** 按钮
- 恢复到服务器上的当前配置
- 放弃未保存的修改

## 📝 配置示例

### 目标论坛（每行一个）
```
fid=141
fid=2
fid=36
```

### 论坛名称映射（格式：fid=ID|名称）
```
fid=141|网友原创区
fid=2|亚洲无码原创区
fid=36|亚洲有码原创区
```

### 过滤关键词（每行一个）
```
公告
通知
规则
版规
置顶
```

### 回复模板（每行一个）
```
谢谢楼主分享！
感谢分享，收藏了！
好资源，支持一下！
楼主辛苦了，谢谢分享！
```

## 🔧 技术实现

### 前端（JavaScript）
- **loadConfig()**：从 `/api/config` 加载配置，填充表单
  - 数组类型：转换为多行文本（用 `\n` 连接）
  - 对象类型（论坛名称映射）：转换为 `key|value` 格式
  
- **saveConfig()**：收集表单数据，提交到 `/api/config`
  - 多行文本：按 `\n` 分割成数组，过滤空行
  - 论坛名称映射：按 `|` 分割，构建对象

### 后端（Flask）
- **GET /api/config**：返回完整配置（密码脱敏）
- **POST /api/config**：保存配置到 `config.json`
- 所有配置项都支持读写，无需修改后端代码

## ⚠️ 注意事项

### 1. 敏感信息
- **用户名和密码**：会显示在Web界面，确保：
  - 使用强密码登录Web界面
  - 不要在公共环境下编辑配置
  - Docker部署建议设置 `WEB_USERNAME` 和 `WEB_PASSWORD` 环境变量

### 2. 配置生效
- **立即生效**：保存后配置文件立即更新
- **需要重启**：如果机器人正在运行，需要点击"停止"再"启动"才能应用新配置
- **Docker环境**：配置已通过卷挂载持久化

### 3. 格式要求
- **论坛名称映射**：必须使用 `|` 分隔符，如 `fid=141|网友原创区`
- **目标论坛**：必须以 `fid=` 开头，如 `fid=141`
- **回复间隔**：最小值必须小于最大值

### 4. 测试模式
- **全局测试模式**：覆盖所有测试选项
- **单独测试模式**：可以只测试回复或只测试签到
- **生产环境**：确保所有测试模式都关闭

## 🎉 总结

现在你可以：
✅ 在Web界面修改所有配置项
✅ 无需手动编辑 `config.json` 文件
✅ 无需重启容器即可更改配置
✅ 直观的分区卡片设计
✅ 详细的提示和说明
✅ 多行文本支持，方便编辑列表

所有 `config.json` 中的配置项都已支持在线设置！🚀

---

**更新时间**：2025-10-04  
**版本**：v3.7
